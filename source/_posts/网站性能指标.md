---
title: 网站性能指标
date: 2017-06-04 23:58:00
tags:
    - 性能指标
    - QPS
    - 并发数
    - 吞吐量
---

## QPS
>每秒查询率（Query Per Second),每秒响应请求数

QPS = 完成Request量/所花时间（单位 Request/s)

## 吞吐量（Throughput)
>吞吐量是指系统在单位时间内响应的数据量

一个系统吞吐量通常由QPS（TPS）、并发数两个因素决定，每套系统这两个值都有一个相对极限值，在应用场景访问压力下，只要某一项达到系统最高值，系统的吞吐量就上不去了，如果压力继续增大，系统的吞吐量反而会下降，原因是系统超负荷工作，上下文切换、内存等等其它消耗导致系统性能下降

<!--more-->

## 并发数
>并发数是指系统同时处理的Request数，并发量值等于平均响应时间内完成的Request量

```
并发数 = QPS*平均响应时间 = (完成Requst量/所花时间) X 平均响应时间
```

一个典型的上班签到系统，早上8点上班，7点半到8点的30分钟的时间里用户会登录签到系统完成签到。公司员工为1000人，平均每个员上登录签到系统的时长为5分钟。可以用下面的方法计算：

QPS = 1000/(30*60) 事务/秒

平均响应时间为 = 5*60  秒

并发数= QPS*平均响应时间 = 1000/(30*60) *(5*60)=166.7

## 峰值QPS

>每天80%的访问集中在20%的时间里，这20%时间叫做峰值

```
峰值时间每秒请求数(QPS) = ( 总PV数 * 80% ) / ( 每天秒数 * 20% )
需要的机器数量 = 峰值时间每秒QPS / 单台机器的QPS
```

1. 每天300w PV 的在单台机器上，这台机器需要多少QPS？
答：( 3000000 * 0.8 ) / (86400 * 0.2 ) = 139 (QPS)

2. 如果一台机器的QPS是58，需要几台机器来支持？
答：139 / 58 = 3

## 参考
[系统吞吐量、TPS（QPS）、用户并发量、性能测试概念和公式](http://blog.csdn.net/wind19/article/details/8600083)
